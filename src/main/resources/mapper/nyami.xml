<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.mapper.StoreMapper">

<!-- 
가게 상세정보 구해오기
<select id="getStoreDetail" parameterType="int" resultType="StoreDetail">
    SELECT id, store_name, address, detail_address, phone_number, 
           oner_phone_number, main_image_1, main_image_2, latitude, 
           longitude, views, open_time, store_description
    FROM store_detail
    WHERE id = #{id}
</select>

메뉴목록 가져오기
<select id="getMenuListByStoreId" parameterType="int" resultType="Menu">
    SELECT menu_id, store_id, menu_name, description, price, image_url
    FROM menu
    WHERE store_id = #{storeId}
    ORDER BY menu_name ASC
</select>

리뷰목록 가져오기
<select id="getReviewsByStoreId" parameterType="int" resultType="Review">
    SELECT review_id, store_id, reviewer_name, rating, content, created_at
    FROM reviews
    WHERE store_id = #{storeId}
    ORDER BY created_at DESC
</select>

찜하기 상태 확인
<select id="checkLikeStatus" parameterType="map" resultType="boolean">
    SELECT COUNT(*) > 0
    FROM likes
    WHERE user_id = #{userId} AND store_id = #{storeId}
</select>

찜 추가
<insert id="addLike" parameterType="map">
    INSERT INTO likes (user_id, store_id)
    VALUES (#{userId}, #{storeId})
</insert>

찜 삭제
<delete id="removeLike" parameterType="map">
    DELETE FROM likes
    WHERE user_id = #{userId} AND store_id = #{storeId}
</delete>

가게 조회수 증가
<update id="incrementViewCount" parameterType="int">
    UPDATE store_detail
    SET views = views + 1
    WHERE id = #{id}
</update> 
-->

</mapper>